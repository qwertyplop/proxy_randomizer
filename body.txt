2025-11-23 13:24:14.655 [info] üîí Admin Access: Attempting to find specific model 'gemini-2.5-pro'
2025-11-23 13:24:14.655 [info] [2025-11-23T13:24:14.645595] üöÄ ATTEMPTING REQUEST
2025-11-23 13:24:14.655 [info] Source: sillytavern
2025-11-23 13:24:14.655 [info] Provider: Vertex-Gemini | Model: gemini-2.5-pro
2025-11-23 13:24:14.655 [info] Base URL (Config): https://aiplatform.googleapis.com/v1/publishers/google/models
2025-11-23 13:24:14.655 [info] Target URL (Final): https://aiplatform.googleapis.com/v1/publishers/google/models/gemini-2.5-pro:streamGenerateContent?key=AUTO
2025-11-23 13:24:14.655 [info] üîç Vertex Request Body: {
  "contents": [
    {
      "role": "user",
      "parts": [
        {
          "text": "Hi"
        }
      ]
    }
  ],
  "generationConfig": {
    "maxOutputTokens": 8192,
    "temperature": 1.0,
    "topP": 0.95
  },
  "safetySettings": [
    {
      "category": "HARM_CATEGORY_HATE_SPEECH",
      "threshold": "OFF"
    },
    {
      "category": "HARM_CATEGORY_DANGEROUS_CONTENT",
      "threshold": "OFF"
    },
    {
      "category": "HARM_CATEGORY_SEXUALLY_EXPLICIT",
      "threshold": "OFF"
    },
    {
      "category": "HARM_CATEGORY_HARASSMENT",
      "threshold": "OFF"
    }
  ]
}
2025-11-23 13:24:14.847 [info] ‚úÖ Response Status: 400
2025-11-23 13:24:14.847 [info] ‚ùå Error Body: [{
  "error": {
    "code": 400,
    "message": "Request contains an invalid argument.",
    "status": "INVALID_ARGUMENT"
  }
}
]
2025-11-23 13:24:14.848 [info] 127.0.0.1 - - [23/Nov/2025 13:24:14] "POST /sillytavern/chat/completions HTTP/1.1" 400 -


---

reference for Gemini

cat << EOF > request.json
{
    "contents": [
        {
            "role": "user",
            "parts": [
            ]
        }
    ]
    , "generationConfig": {
        "temperature": 1
        ,"maxOutputTokens": 65535
        ,"topP": 0.95
        ,"thinkingConfig": {
            "thinkingBudget": -1
        }
    },
    "safetySettings": [
        {
            "category": "HARM_CATEGORY_HATE_SPEECH",
            "threshold": "OFF"
        },
        {
            "category": "HARM_CATEGORY_DANGEROUS_CONTENT",
            "threshold": "OFF"
        },
        {
            "category": "HARM_CATEGORY_SEXUALLY_EXPLICIT",
            "threshold": "OFF"
        },
        {
            "category": "HARM_CATEGORY_HARASSMENT",
            "threshold": "OFF"
        }
    ]
    , "tools": [
      {
        "googleSearch": {}
      }
    ]
}
EOF

API_KEY="<YOUR_API_KEY>"
API_ENDPOINT="aiplatform.googleapis.com"
MODEL_ID="gemini-2.5-pro"
GENERATE_CONTENT_API="streamGenerateContent"

curl \
-X POST \
-H "Content-Type: application/json" \
"https://${API_ENDPOINT}/v1/publishers/google/models/${MODEL_ID}:${GENERATE_CONTENT_API}?key=${API_KEY}" -d '@request.json'

---

reference for Non-Gemini (works with current script version as we tested)

cat << EOF > request.json
{
    "model": "moonshotai/kimi-k2-thinking-maas"
    ,"stream": true
    ,"max_tokens": 8192
    ,"temperature": 0.6
    ,"top_p": 0.95
    ,"messages": [
        {
            "role": "user",
            "content": [
            ]
        }
    ]
}
EOF

ENDPOINT="aiplatform.googleapis.com"
REGION="global"
PROJECT_ID="gen-lang-client-0031641020"

curl \
-X POST \
-H "Content-Type: application/json" \
-H "Authorization: Bearer $(gcloud auth print-access-token)" \
"https://${ENDPOINT}/v1beta1/projects/${PROJECT_ID}/locations/${REGION}/endpoints/openapi/chat/completions" -d '@request.json'